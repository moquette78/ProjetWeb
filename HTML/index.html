<!DOCTYPE html>
<html>
<head> <meta charset="utf-8" />
    <title>Page de connexion </title>
    <link rel="stylesheet" type="text/css" href="../CSS/style.css">
    
</head>
 
<body>
    <h1> PROJET WEB</h1>
    <div id="resultati">
        <!-- on affichera une erreur si ca n'est pas bon -->
    </div>
  	
  	<form action="index.php"><h2> Inscription</h1> <br/>
        <div><label for="pseudoi"> Pseudo : </label><input type="text" id="pseudoi" /></div>
        <div><label for="mdpi"> Mot de passe : </label> <input type="password" id="mdpi" /></div>
        <input class="bouton" type="submit" id="submiti" value="S'inscrire !" />
    </form>

    <div id="resultatc">
        <!-- on affichera une erreur si ca n'est pas bon -->
    </div>

    <form action="index.php"> <h2>Connexion </h1><br/>
        <div><label for="pseudoc"> Pseudo : </label><input type="text" id="pseudoc" /></div>
        <div><label for="mdpc"> Mot de passe : </label> <input type="password" id="mdpc" /></div>
        <input class="bouton" type="submit" id="submitc" value="Se connecter !" />
    </form> <br/>

 

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
 
$(document).ready(function(){
 
    $("#submitc").click(function(e){  // lorsque l'on click sur le bouton d'envoie
        e.preventDefault();   // l'action du submit n'est pas delenchée, on doit dabord faire des verification
 
        $.post(
            '../PHP/connexion.php', // pour valider la connexion
            {
                pseudo : $("#pseudoc").val(),  // Nous récupérons la valeur de nos input que l'on fait passer à connexion.php
                mdp : $("#mdpc").val()
            },
 
            function(data){
 
                if(data == 'Success'){
                     // Le membre est connecté. Ajoutons lui un message dans la page HTML.
 
                     document.location.href="website.html";
                }
                else{
                     // Le membre n'a pas été connecté. (data vaut ici "failed")
 
                     $("#resultatc").html("<p>Erreur lors de la connexion...</p>");
                }
         
            },
            'text'
         );
    });

    $("#submiti").click(function(e){  // lorsque l'on click sur le bouton d'envoie
        e.preventDefault();   // l'action du submit n'est pas delenchée, on doit dabord faire des verification
 
        $.post(
            '../PHP/inscription.php', // Un script PHP que l'on va créer juste après
            {
                pseudo : $("#pseudoi").val(),  // Nous récupérons la valeur de nos input que l'on fait passer à connexion.php
                mdp : $("#mdpi").val()
            },
 
            function(data){
 
                if(data == 'Success'){
                     document.location.href="website.html"; 
                }
                else{
                     // Le membre n'a pas été connecté. (data vaut ici "failed")
 
                     $("#resultati").html("<p>Pseudo deja existant ...</p>");
                }
         
            },
            'text'
         );
    });

});
 
</script>

</body>
</html>
 
